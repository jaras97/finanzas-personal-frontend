@import 'tailwindcss';
@import 'tw-animate-css';

/* Dark variant */
@custom-variant dark (&:is(.dark *));

/* =========================================
   THEME (Tailwind v4 Engine)
   ========================================= */
@theme inline {
  --font-sans: 'Inter', ui-sans-serif, system-ui, -apple-system, Segoe UI,
    Roboto, 'Helvetica Neue', Arial, 'Noto Sans', 'Apple Color Emoji',
    'Segoe UI Emoji';
  --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas,
    'Liberation Mono', 'Courier New', monospace;

  /* Radii */
  --radius-sm: 0.375rem;
  --radius-md: 0.5rem;
  --radius-lg: 0.75rem;
  --radius-xl: 1rem;

  /* Base tokens (derivan de :root/.dark) */
  --color-background: var(--background);
  --color-foreground: var(--foreground);

  --color-card: var(--card);
  --color-card-foreground: var(--card-foreground);

  --color-popover: var(--popover);
  --color-popover-foreground: var(--popover-foreground);

  --color-primary: var(--primary);
  --color-primary-foreground: var(--primary-foreground);

  --color-muted: var(--muted);
  --color-muted-foreground: var(--muted-foreground, 215 16% 47%);

  --color-accent: var(--accent); /* superficies suaves azuladas */
  --color-accent-foreground: var(--accent-foreground);

  --color-border: var(--border);
  --color-input: var(--input);
  --color-ring: var(--ring);

  /* Sidebar */
  --color-sidebar: var(--sidebar);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-ring: var(--sidebar-ring);

  /* Charts (usadas en Recharts/vis) */
  --color-chart-1: 213 94% 68%; /* sky-400 */
  --color-chart-2: 160 84% 39%; /* emerald-500 */
  --color-chart-3: 43 96% 56%; /* amber-400 */
  --color-chart-4: 0 84% 60%; /* red-500 */
  --color-chart-5: 258 90% 66%; /* violet-500 */

  --color-footer: var(--footer);
  --color-footer-foreground: var(--footer-foreground);
  --color-footer-border: var(--footer-border);
  --color-footer-ring: var(--footer-ring);
}

/* =========================================
   LIGHT
   ========================================= */
:root {
  /* Fondo general (azul tenue) */
  --background: 216 100% 98%; /* #F3F8FF aprox */
  --foreground: 222 47% 11%;

  --card: 0 0% 100%;
  --card-foreground: 222 47% 11%;

  --popover: 0 0% 100%;
  --popover-foreground: 222 47% 11%;

  --primary: 220 83% 56%; /* #2563EB (blue-600) */
  --primary-foreground: 0 0% 100%;

  --muted: 214 32% 95%; /* superficie suave */
  --muted-foreground: 215 16% 47%;

  --accent: 210 100% 97%; /* azul muy claro para secciones */
  --accent-foreground: 217 33% 17%;

  --border: 214 32% 91%;
  --input: 0 0% 100%;
  --ring: 220 83% 56%;

  /* Sidebar: azul petr√≥leo con alto contraste */
  --sidebar: 218 39% 14%; /* slate-900-ish */
  --sidebar-foreground: 210 40% 98%; /* casi blanco */
  --sidebar-primary: 220 83% 56%;
  --sidebar-primary-foreground: 0 0% 100%;
  --sidebar-border: 217 33% 17%;
  --sidebar-ring: 220 83% 56%;

  --footer: 221 35% 22%; /* ‚âà slate-800 azulado, +claro que sidebar (14%) */
  --footer-foreground: 210 40% 98%; /* casi blanco */
  --footer-border: 221 30% 28%; /* borde ligeramente m√°s claro que el fondo */
  --footer-ring: 220 83% 56%;

  --skeleton-base: hsl(var(--muted) / 0.8);
  /* Base alternativa con m√°s contraste (para KPIs/paneles) */
  --skeleton-base-contrast: hsl(var(--foreground) / 0.08);
  /* Para superficies blancas (charts/cards) */
  --skeleton-base-surface: hsl(var(--card) / 0.7);

  /* La franja del shimmer: oscurita en light para que se note */
  --skeleton-via: hsl(var(--foreground) / 0.12);
}

/* Capa fija de fondo (evita ‚Äúsaltos‚Äù en mobile al scrollear) */
.app-bg {
  position: fixed;
  inset: 0;
  z-index: -1;
  pointer-events: none;

  background: radial-gradient(
      1200px 600px at 20% -10%,
      hsl(210 100% 97%),
      transparent 60%
    ),
    radial-gradient(1200px 700px at 80% 0%, hsl(214 95% 93%), transparent 55%),
    hsl(var(--background));
  background-repeat: no-repeat;
  background-size: 180% 180%, 180% 180%, cover; /* muy grande => no se ‚Äúacaba‚Äù */
}

/* =========================================
   DARK
   ========================================= */
.dark {
  --background: 222 47% 7%;
  --foreground: 210 40% 98%;

  --card: 222 47% 11%;
  --card-foreground: 210 40% 98%;

  --popover: 222 47% 11%;
  --popover-foreground: 210 40% 98%;

  --primary: 220 83% 56%;
  --primary-foreground: 0 0% 100%;

  --muted: 222 20% 16%;
  --muted-foreground: 215 20% 80%;

  --accent: 222 20% 12%;
  --accent-foreground: 210 40% 96%;

  --border: 222 20% 18%;
  --input: 222 47% 11%;
  --ring: 220 83% 56%;

  --sidebar: 222 47% 7%;
  --sidebar-foreground: 210 40% 98%;
  --sidebar-primary: 220 83% 56%;
  --sidebar-primary-foreground: 0 0% 100%;
  --sidebar-border: 222 20% 18%;
  --sidebar-ring: 220 83% 56%;

  --footer: 222 32% 12%; /* intermedio; se diferencia de background(7%) y card(11%) */
  --footer-foreground: 210 40% 98%;
  --footer-border: 222 20% 18%;
  --footer-ring: 220 83% 56%;

  --skeleton-base: hsl(var(--muted) / 0.5);
  --skeleton-base-contrast: hsl(var(--foreground) / 0.16);
  --skeleton-base-surface: hsl(var(--card) / 0.55);
  --skeleton-via: hsl(0 0% 100% / 0.18);
}

/* =========================================
   BASE
   ========================================= */
@layer base {
  * {
    @apply border-border outline-ring/50;
  }
  html,
  body {
    height: 100%;
  }
  body {
    @apply text-foreground;
    font-family: var(--font-sans);
    /* Fondo s√≥lido; los gradientes viven en .app-bg fija */
    background: hsl(var(--background));
    -webkit-tap-highlight-color: transparent;
  }
}

/* =========================================
   UTILIDADES
   ========================================= */
@layer utilities {
  /* Superficie blanca con sombra sutil */
  .card-surface {
    @apply bg-card rounded-2xl;
    border: 1px solid hsl(var(--border) / 0.45);
    box-shadow: 0 1px 0 0 rgba(0, 0, 0, 0.02),
      0 10px 30px -12px rgba(2, 6, 23, 0.12);
  }

  /* Panel suave y consistente para ‚Äútodas las dem√°s‚Äù cards */
  .panel-muted {
    background: hsl(var(--accent));
    border: 1px solid hsl(var(--border) / 0.45);
    border-radius: 1rem; /* rounded-2xl */
    box-shadow: 0 1px 0 0 rgba(0, 0, 0, 0.02),
      0 10px 30px -12px rgba(2, 6, 23, 0.1);
  }

  /* Panel para gr√°ficas (blanco, m√°s contraste) */
  .chart-surface {
    @apply bg-white rounded-2xl;
    border: 1px solid hsl(var(--border) / 0.5);
    box-shadow: 0 1px 0 0 rgba(0, 0, 0, 0.02),
      0 14px 40px -14px rgba(2, 6, 23, 0.16);
  }

  /* KPI con gradiente fuerte (las 3 top cards) */
  .kpi-gradient-strong {
    background: linear-gradient(
      140deg,
      hsl(220 83% 56%) 0%,
      hsl(201 94% 52%) 100%
    );
    @apply text-white rounded-2xl;
    box-shadow: 0 14px 40px -12px rgba(37, 99, 235, 0.55);
  }

  .bg-footer {
    background-color: hsl(var(--footer)) !important;
  }
  .text-footer-foreground {
    color: hsl(var(--footer-foreground)) !important;
  }
  .border-footer-border {
    border-color: hsl(var(--footer-border)) !important;
  }
  .ring-footer-ring {
    --tw-ring-color: hsl(var(--footer-ring)) !important;
  }
}

@layer components {
  /* Fuerza fondo s√≥lido en todo el popover del Select cuando uses className="select-solid" */
  .select-solid[data-slot='select-content'],
  .select-solid [data-slot='select-content'] {
    background-color: hsl(var(--card)) !important;
    color: hsl(var(--card-foreground)) !important;
    border-color: hsl(var(--border)) !important;
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
  }
  .select-solid [data-slot='select-viewport'],
  .select-solid [data-slot='select-scroll-up-button'],
  .select-solid [data-slot='select-scroll-down-button'] {
    background-color: hsl(var(--card)) !important;
  }

  .modal-surface {
    background-color: hsl(var(--card)) !important;
    color: hsl(var(--card-foreground)) !important;
    border: 1px solid hsl(var(--border)) !important;
    box-shadow: 0 24px 60px -20px rgba(2, 6, 23, 0.45),
      0 1px 0 0 rgba(0, 0, 0, 0.04) !important;
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
  }

  .modal-surface-tinted {
    background-color: transparent !important; /* üëà no forzamos blanco */
    color: hsl(var(--card-foreground)) !important;
    border: 1px solid hsl(var(--border)) !important;
    box-shadow: 0 24px 60px -20px rgba(2, 6, 23, 0.45),
      0 1px 0 0 rgba(0, 0, 0, 0.04) !important;
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
  }

  /* Root del calendario */
}

@keyframes shimmer {
  0% {
    transform: translateX(-100%);
  }
  100% {
    transform: translateX(100%);
  }
}
